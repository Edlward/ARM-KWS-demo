# ARM KWS Demo

This repository contains a demo of [Keyword spotting for Microcontrollers](https://github.com/ARM-software/ML-KWS-for-MCU.git).

This demo is based on the ARM KWS for MCU's [simple_test](https://github.com/ARM-software/ML-KWS-for-MCU/tree/master/Deployment/Examples/simple_test), but removed the dependencies of mbed and adapt to linux platform and other arm chips.

## Quick start

1. Install toolchains
2. Clone related repositories:
```
git clone https://github.com/JeffyCN/ARM-KWS-demo.git
git clone https://github.com/JeffyCN/ML-KWS-for-MCU.git
git clone https://github.com/JeffyCN/CMSIS_5.git -b master
```
3. Enter ARM-KWS-demo/ and build the demo with "make"
4. Run the generated "kws_test" on the device or use qemu-arm-static:
```
root@jeffy:/# kws_test
Detected right (99%)
```

## Build for MCU

To build this demo for MCU:
```
make clean && make CPU=m4
```

## More details about the demo

This demo is running [ARM KWS](https://github.com/ARM-software/ML-KWS-for-MCU.git) on [specified wave data](Source/wav_data.h) with a pre-generated DS CNN [quantized weights](https://github.com/ARM-software/ML-KWS-for-MCU/blob/master/Deployment/Source/NN/DS_CNN/ds_cnn_weights.h).

The quantized weights is generated by [quant_test.py](https://github.com/ARM-software/ML-KWS-for-MCU/blob/master/quant_test.py) from [trained model](https://github.com/ARM-software/ML-KWS-for-MCU/blob/master/train_commands.txt) checkpoint.

More details about the quantized weights, please check [this article](https://blog.csdn.net/xj853663557/article/details/83688464). And [this guide](https://github.com/cledic/ML-KWS-for-MCU/blob/master/README2.md) for steps to rebuild the training.
